<div [@fadeInOut] #resumenCot>
    <br />
    <div class="pt-1 mb-1">
        <div class="row d-flex align-items-center">
            <div class="col-7 col-md-8">
                <h2 class="text-black-90">
                    Cotización {{model.nombreComercial}}
                    <span *ngIf="model.idServicio == 1" class="text-muted h5">(Mantenimiento)</span>
                    <span *ngIf="model.idServicio == 2" class="text-muted h5">(Limpieza)</span>
                    <span *ngIf="model.idServicio == 3" class="text-muted h5">(Sanitización)</span>
                    <span *ngIf="model.idServicio == 4" class="text-muted h5">(Insumos)</span>
                    <span *ngIf="model.idServicio == 5" class="text-muted h5">(Evento, {{ model.diasEvento }} dias )</span>
                </h2>
            </div>
            <div class="col-5 col-md-4 text-end">
                <h6><span>Id: {{model.idCotizacion}}</span> <span *ngIf="model.idCotizacionOriginal != 0" class="ms-3">Id original: {{model.idCotizacionOriginal}}</span></h6>
            </div>
        </div>
    </div>
    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <button type="button" (click)="existe(model.idCotizacion)" class="nav-link active" data-bs-toggle="tab"
                    data-bs-target="#resumen" role="tab" aria-controls="resumen"
                    aria-selected="true">
                Resumen
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab"
                    data-bs-target="#prospecto" role="tab" aria-controls="prospecto"
                    aria-selected="false">
                Prospecto
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab"
                    data-bs-target="#directorio" role="tab" aria-controls="directorio"
                    aria-selected="false">
                Directorio
            </button>
        </li>
        <li *ngIf="model.idServicio != 4" class="nav-item">
            <button type="button" class="nav-link" (click)="getPlan()" data-bs-toggle="tab"
                    data-bs-target="#plantilla" role="tab" aria-controls="plantilla"
                    aria-selected="false">
                Plantilla
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab" (click)="getMat('material')"
                    data-bs-target="#material" role="tab" aria-controls="material"
                    aria-selected="false">
                Material
            </button>
        </li>
        <li *ngIf="model.idServicio != 4" class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab" (click)="getMat('uniforme')"
                    data-bs-target="#material" role="tab" aria-controls="uniforme"
                    aria-selected="false">
                Uniforme
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab" (click)="getMat('equipo')"
                    data-bs-target="#material" role="tab" aria-controls="equipo"
                    aria-selected="false">
                Equipo
            </button>
        </li>
        <li class="nav-item">
            <button type="button" class="nav-link" data-bs-toggle="tab" (click)="getMat('herramienta')"
                    data-bs-target="#material" role="tab" aria-controls="herramienta"
                    aria-selected="false">
                Herramienta
            </button>
        </li>
        <li *ngIf="model.idServicio != 4" class="nav-item">
            <button type="button" class="nav-link" (click)="getServ()" data-bs-toggle="tab"
                    data-bs-target="#servicio" role="tab" aria-controls="servicio"
                    aria-selected="false">
                Servicio
            </button>
        </li>
    </ul>
    <br />

    <div class="tab-content">
        <div class="fade-in-container tab-pane fade show active" id="resumen" role="tabpanel" aria-labelledby="resumen-tab">
            <div class="row" style="border-radius: 10px; overflow-x: hidden;">
                <table class="table table-borderless table-responsive">
                    <thead>
                        <tr>
                            <th class="ps-2 text-center">Lista de Conceptos</th>
                        </tr>
                    </thead>
                    <tbody class="align-items-center">
                        <tr *ngIf="model.idServicio != 4">
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Mano de obra</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.salario | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-3"></div>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="model.idServicio != 4">
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Prestaciones</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.provisiones | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="model.idServicio != 4">
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Carga Social</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.cargaSocial | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="model.idServicio != 4">
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Provisiones</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.prestaciones | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Materiales</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.material | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="model.idServicio != 4">
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Uniformes</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.uniforme | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Equipos</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.equipo | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom" [ngClass]="{'border-success': model.idServicio == 4}">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Herramientas</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.herramienta | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="model.idServicio != 4">
                            <td class="border-bottom border-success">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Servicios</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.servicio | number: '1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Total CD</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.subTotal | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row  text-muted">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3 text-start"><h5>Costo Indirecto (%)</h5></div>
                                    <div class="col-2 col-md-1"><input type="number" class="form-control" [(ngModel)]="model.indirectoPor" value="{{model.indirectoPor}}" placeholder="{{model.indirectoPor}}" autocomplete="off" required></div>
                                    <div class="col-4 col-md-2 text-end"><h5>${{ model.indirecto | number:'1.2-2'}}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Total CI</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.subTotal + model.indirecto | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row text-muted">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3 text-start"><h5>Utilidad (%)</h5></div>
                                    <div class="col-2 col-md-1"><input type="number" class="form-control" [(ngModel)]="model.utilidadPor" placeholder="{{model.utilidadPor}}" autocomplete="off" required></div>
                                    <div class="col-4 col-md-2  text-end"><h5>${{ model.utilidad | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Total U</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ model.subTotal + model.indirecto + model.utilidad | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row text-muted">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3 text-start"><h5>Comisión Sobre Venta (%)</h5></div>
                                    <div class="col-2 col-md-1 ">
                                        <input type="number" class="form-control" [(ngModel)]="model.csvPor" placeholder="{{model.csvPor}}" autocomplete="off" required>
                                    </div>
                                    <div class="col-4 col-md-2 text-end"><h5>${{ model.comisionSV | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Total CSV</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ (model.subTotal + model.indirecto + model.utilidad + model.comisionSV) | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom border-success">
                                <div class="row text-muted">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3 text-start"><h5>Comisión Externa (%)</h5></div>
                                    <div class="col-2 col-md-1 ">
                                        <input type="number" class="form-control" [(ngModel)]="model.comisionExtPor" placeholder="{{model.comisionExtPor}}" autocomplete="off" required>
                                    </div>
                                    <div class="col-4 col-md-2  text-end"><h5>${{ model.comisionExt | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-6 col-md-3 text-start"><h5>Total CE</h5></div>
                                    <div class="col-4 col-md-3 text-end"><h5>${{ (model.subTotal + model.indirecto + model.utilidad + model.comisionSV + model.comisionExt) | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="model.polizaCumplimiento == true">
                            <td class="border-bottom border-success">
                                <div class="row text-muted">
                                    <div class="col-1 col-md-3"></div>
                                    <div class="col-4 col-md-3 text-start"><h5>Póliza de cumplimiento</h5></div>
                                    <div class="col-2 col-md-1 ">
                                        <!--<input #comisionExttxt type="text" class="form-control" id="polizaCumplimiento" name="polizaCumplimiento" [(ngModel)]="model.polizaCumplimiento"  value="{{model.polizaCumplimiento}}" placeholder="{{model.polizaCumplimiento}}" autocomplete="off" required disabled>-->
                                    </div>
                                    <div class="col-4 col-md-2  text-end"><h5>${{ model.totalPolizaCumplimiento | number:'1.2-2' }}</h5></div>
                                    <div class="col-1 col-md-2"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td class="border-bottom">
                                <div class="row">
                                    <div class="col-3 col-md-3 offset-3 text-start"><h4>Total</h4></div>
                                    <div class="col-3 col-md-3 text-end"><h4>${{ model.subTotal + model.indirecto + model.utilidad + model.comisionSV + model.comisionExt + model.totalPolizaCumplimiento | number:'1.2-2' }}</h4></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td *ngIf="model.idServicio == 5" class="border-bottom">
                                <div class="row">
                                    <div class="col-3 col-md-3 offset-3 text-start"><h4>Costo diario</h4></div>
                                    <div class="col-3 col-md-3 text-end"><h4>${{ totalDia | number:'1.2-2' }}</h4></div>
                                </div>
                            </td>
                        </tr>

                    </tbody>
                </table>
                <div *ngIf="model.idEstatus == 1 && autorizacion === 1" class="row">
                    <div class="col-3 col-md-3 offset-3 text-start">
                        <button type="submit" class="btn btn-outline-primary d-flex align-items-center" (click)="actualizarIndirectoUtilidad()"><i class="fa-solid fa-percent fa-xl me-2"></i> Actualizar porcentajes</button><br><br>
                    </div>
                </div>
            </div>
            <br />


            <div class="accordion col-xl-12" id="accordionExample">
                <!--Pestaña 0-->
                <div class="accordion-item">
                    <h1 class="accordion-header" id="headingCotizacion">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDescargarCotizacion" aria-expanded="false" aria-controls="collapseCotizacion">
                            <i class="fa fa-download me-2"></i> Descargar
                        </button>
                    </h1>
                    <div id="collapseDescargarCotizacion" class="accordion-collapse collapse" aria-labelledby="headingCotizacion">
                        <div class="accordion-body">
                            <div class="row text-center">
                                <div *ngIf="model.idServicio == 5" class="col-4 col-md-3 col-4 mb-3">
                                    <button type="button" (click)="formatoDocumento('Propuesta evento', 5)" [disabled]="isLoading" class="btn btn-outline-success"><i class="fa-solid fa-calendar-days fa-xl me-2"></i> Propuesta de evento</button>
                                </div>
                                <div *ngIf="model.idServicio == 4" class="col-4 col-md-3 col-4 mb-3">
                                    <button type="button" (click)="formatoDocumento('Propuesta insumos', 4)" [disabled]="isLoading" class="btn btn-outline-success"><i class="fa-solid fa-pump-soap fa-xl me-2"></i> Propuesta suministro de insumos</button>
                                </div>
                                <div *ngIf="model.idServicio != 4 && model.idServicio != 5" class="col-4 col-md-3 mb-3">
                                    <button type="button" (click)="formatoDocumento('Propuesta técnica', 1)" [disabled]="isLoading" class="btn btn-outline-info"><i class="fa-solid fa-file-lines fa-xl me-2"></i> Propuesta Técnica</button>
                                </div>
                                <div *ngIf="model.idServicio != 4 && model.idServicio != 5" class="col-3 col-md-3 col-4 mb-3">
                                    <button type="button" (click)="formatoDocumento('Propuesta económica',2)" [disabled]="isLoading" class="btn btn-outline-success"><i class="fa-solid fa-file-lines fa-xl me-2"></i> Propuesta Económica</button>
                                </div>
                                <div *ngIf="model.idServicio != 4 && model.idServicio != 5" class="col-4 col-md-3 mb-3">
                                    <button type="button" (click)="formatoDocumento('Propuesta técnica(Mano de obra)',3)" [disabled]="isLoading" class="btn btn-outline-secondary"><i class="fa-solid fa-file-lines fa-xl me-2"></i> Propuesta Técnica(Mano de obra)</button>
                                </div>
                                <div class="col-4 col-md-3 mb-3">
                                    <button type="button" (click)="descargarDatosCotizacion()" [disabled]="isLoading" class="btn btn-outline-secondary"><i class="fa-solid fa-file-excel fa-xl me-2"></i> Datos de cotización</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Pestaña 1-->
                <div class="accordion-item">
                    <h1 class="accordion-header" id="headingCotizacion">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAccionesCotizacion" aria-expanded="false" aria-controls="collapseCotizacion">
                            <i class="fa fa-chevron-right me-2"></i> Acciones
                        </button>
                    </h1>
                    <div id="collapseAccionesCotizacion" class="accordion-collapse collapse" aria-labelledby="headingCotizacion">
                        <div class="accordion-body">
                            <div class="row text-center">
                                <div *ngIf="model.idEstatus == 1 || model.idEstatus == 6 && model.idServicio != 4 && model.idServicio != 5" class="col-4 col-md-4 mb-3">
                                    <button type="button" (click)="modalContrato()" [disabled]="isLoading" class="btn btn-outline-primary "><i class="fa-solid fa-user-check fa-xl me-2"></i> Convertir prospecto a cliente</button>
                                </div>
                                <div *ngIf="model.idEstatus == 1" class="col-4 col-md-4 mb-3">
                                    <button type="button" (click)="confirmaDuplicarCotizacion(model.idCotizacion)" [disabled]="isLoading" class="btn btn-outline-danger"><i class="fa-solid fa-copy fa-xl me-2"></i> Duplicar Cotización</button>
                                </div>
                                <div *ngIf="user.idPersonal == 27 || user.idPersonal == 43 || user.idPersonal == 20655 || user.idPersonal == 1" class="col-4 col-md-4 mb-3">
                                    <button *ngIf="model.idEstatus != 6 && model.idEstatus != 4" type="button" (click)="confirmaAutorizarCotizacion()" [disabled]="isLoading" class="btn btn-outline-info"><i class="fa-solid fa-check fa-xl me-2"></i> Autorizar Cotización</button>
                                </div>
                                <div *ngIf="user.idPersonal == 27 || user.idPersonal == 43 || user.idPersonal == 20655 || user.idPersonal == 1" class="col-4 col-md-4 mb-3">
                                    <button *ngIf="model.idEstatus == 6 && model.idEstatus != 4" type="button" (click)="confirmaRemoverAutorizacionCotizacion()" [disabled]="isLoading" class="btn btn-outline-success"><i class="fa-solid fa-rotate-left fa-xl me-2"></i> Remover autorización</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>
        <div class="tab-pane fade" id="prospecto" role="tabpanel" aria-labelledby="resumen-tab">
            <div class="row">
                <div class="col-sm-12 col-md-4 mb-3">
                    <div class="form-floating">
                        <input type="text" class="form-control validacion-prospecto" [(ngModel)]="modelpros.nombreComercial" data-campo="nombreComercial" id="txtNombreComercial">
                        <label for="txtNombreComercial">Nombre Comercial</label>
                    </div>
                    <span *ngIf="ferr('NombreComercial')" class="text-danger">{{ terr('NombreComercial') }}</span>
                </div>
                <div class="col-sm-12 col-md-4 mb-3">
                    <div class="form-floating">
                        <input type="text" class="form-control" [(ngModel)]="modelpros.razonSocial" id="txtRazonSocial">
                        <label for="txtRazonSocial">Razón Social</label>
                    </div>
                    <span *ngIf="ferr('RazonSocial')" class="text-danger">{{ terr('RazonSocial') }}</span>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="form-floating">
                        <input type="text" class="form-control validacion-prospecto" [(ngModel)]="modelpros.rfc" data-campo="rfc" id="txtRFC">
                        <label for="txtRFC">RFC</label>
                    </div>
                    <span *ngIf="ferr('RFC')" class="text-danger">{{ terr('RFC') }}</span>
                    <span *ngIf="ferr('RfcLenght')" class="text-danger">{{ terr('RfcLenght') }}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8 col-sm-12 mb-3">
                    <div class="form-floating">
                        <input type="text" class="form-control" [(ngModel)]="modelpros.domicilioFiscal" id="txtDomicicioFiscal">
                        <label for="txtDomicicioFiscal">Domicilio Fiscal</label>
                    </div>
                    <span *ngIf="ferr('DomicilioFiscal')" class="text-danger">{{ terr('DomicilioFiscal') }}</span>
                </div>
                <div class="col-md-4 col-sm-12 mb-3">
                    <div class="form-floating">
                        <input type="text" class="form-control" [(ngModel)]="modelpros.nombreContacto" id="txtContacto">
                        <label for="txtContacto">Contacto</label>
                    </div>
                    <span *ngIf="ferr('NombreContacto')" class="text-danger">{{ terr('NombreContacto') }}</span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3 col-sm-12 mb-3">
                    <div class="form-floating">
                        <input type="text" class="form-control" [(ngModel)]="modelpros.emailContacto" id="txtEmailContacto">
                        <label for="txtEmailContacto">Email Contacto</label>
                    </div>
                    <span *ngIf="ferr('EmailContacto')" class="text-danger">{{ terr('EmailContacto') }}</span>
                </div>
                <div class="col-md-2 col-sm-12 col-6 mb-3">
                    <div class="form-floating">
                        <input type="text" class="form-control" [(ngModel)]="modelpros.numeroContacto" id="txtNumeroContacto">
                        <label for="txtNumeroContacto">Tel. Contacto</label>
                    </div>
                    <span *ngIf="ferr('NumeroContacto')" class="text-danger">{{ terr('NumeroContacto') }}</span>
                </div>
                <div class="col-md-2 col-sm-12 col-6 mb-3">
                    <div class="form-floating">
                        <input type="text" class="form-control" [(ngModel)]="modelpros.extContacto" id="txtExtension">
                        <label for="txtExtension">Extensión</label>
                    </div>
                    <span *ngIf="ferr('ExtContacto')" class="text-danger">{{ terr('ExtContacto') }}</span>
                </div>
                <div class="col-sm-12 col-md-5 col-12 mb-3">
                    <div class="form-floating">
                        <select class="form-select" aria-label="IdPuesto" [(ngModel)]="modelpros.idTipoIndustria" id="slTipoIndustria">
                            <option value=0>Seleccione...</option>
                            <option *ngFor="let p of indust" [ngValue]="p.id">{{ p.descripcion }}</option>
                        </select>
                        <label for="slTipoIndustria">Tipo de industria</label>
                    </div>
                    <span *ngIf="ferr('IdTipoIndustria')" class="text-danger">{{ terr('IdTipoIndustria') }}</span>
                </div>
            </div>
            <h6><span class="small text-muted mb-2">Documentación</span></h6>
            <div class="row">
                <div class="col-sm-6 col-md-3 col-4" *ngFor="let d of docs">
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="checkbox" id="d.nom" [value]="d.id" [(ngModel)]="d.act" /> {{ d.nom }}
                        </label><br />
                    </div>
                </div>
            </div>
            <!--<br />
            <h5>Poliza de cumplimiento</h5>
            <br />
            <div class="row">
                <div class="col-sm-6 col-md-3 col-4">
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="polizaCumplimiento" [value]="true" [(ngModel)]="model.polizaCumplimiento" required /> Si
                        </label><br />
                    </div>
                </div>
                <div class="col-sm-6 col-md-3 col-4">
                    <div class="form-check">
                        <label class="form-check-label">
                            <input class="form-check-input" type="radio" name="polizaCumplimiento" [value]="false" [(ngModel)]="model.polizaCumplimiento" required /> No
                        </label><br />
                    </div>
                </div>
            </div>-->
            <hr />
            <div *ngIf="model.idEstatus == 1" class="row mb-3">
                <div>
                    <div class="btn-group float-end">
                        <button type="button" (click)="guardaPros()" class="btn btn-outline-success d-flex align-items-center" id="btnGuardarProspecto"><i class="fa-solid fa-save fa-xl me-2"></i> Guardar</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="directorio" role="tabpanel" aria-labelledby="resumen-tab">
            <!--<div *ngIf="model.idEstatus == 1" class="row">
                <div class="col-12 col-sm-12 col-md-12">
                    Seleccionar una dirección existente
                </div>
            </div>
            <br>-->
            <div *ngIf="model.idEstatus == 1" class="row d-flex align-items-center mb-3">
                <div class="col-4 col-sm-12 col-md-4">
                    <div class="form-floating">
                        <select class="form-select" [(ngModel)]="modelDir.idDireccion" aria-label="IdTIpoInmueble" id="IdDireccion">
                            <option value="0">Seleccione...</option>
                            <option *ngFor="let d of dirs" [ngValue]="d.id">{{ d.nom }}</option>
                        </select>
                        <label for="IdDireccion">Agregar una sucursal existente</label>
                    </div>
                    <span *ngIf="ferr('SLidDireccion')" class="text-danger">{{ terr('SLidDireccion') }}</span>
                </div>
                <div class="col-1 col-sm-12 col-md-2">
                    <button type="button" (click)="addDir(1)" class="btn btn-lg btn-outline-success"><i class="fa-solid fa-plus"></i></button>
                </div>

                <div class="col-7 col-sm-12 col-md-6 text-end ">
                    <div class="btn-group">
                        <button type="button" (click)="getNewDir()" class="btn btn-outline-primary" id="btnAgregarDireccion"><i class="fa-solid fa-plus"></i> Nueva Dirección</button>
                    </div>
                </div>
            </div>
            <!--<div *ngIf="isLoading || (lsdir.direcciones && lsdir.direcciones.length === 0)" class="row-12 text-center">
                <hr />
                <br />
                <h6 *ngIf="isLoading">Cargando...</h6>
                <h6 *ngIf="!isLoading && lsdir.direcciones && lsdir.direcciones.length === 0">No se encontraron direcciones</h6>
                <br />
            </div>
            <div *ngIf="isLoading" class="text-center ">
                <i class="fas fa-spinner fa-spin fa-3x"></i>
            </div>-->
            <div *ngIf="lsdir.direcciones && lsdir.direcciones.length > 0" class="table-container" #tbdirecciones>
                <div class="row">
                    <div *ngFor="let dr of lsdir.direcciones" class="col-sm-12 col-md-6 mb-3">
                        <div class="card shadow-sm">
                            <div class="card-header text-center plantilla text-white d-flex align-items-center justify-content-center h6">{{ dr.nombreSucursal }} ({{ dr.tipoInmueble }})</div>
                            <div class="card-body">
                                <div class="row d-flex align-items-center">
                                    <div class="col-md-8 col-8">
                                        <div class=" col-md-12 bd-highlight">
                                            {{ dr.domicilioCompleto }}
                                        </div>
                                    </div>
                                    <div *ngIf="model.idEstatus == 1" class="col-md-4 col-4 text-center">
                                        <div class="col-md-12">
                                            <button type="button" class="btn btn-sm btn-outline-primary" (click)="getExistDir(dr.idDireccion)" data-bs-toggle="tooltip" title="Editar">
                                                <i class="fa-solid fa-pencil fa-2x"></i>
                                            </button>
                                            <button type="button" class="btn btn-sm btn-outline-danger" (click)="confirmaEliminarDireccionCotizacion(dr.idDireccionCotizacion)" data-bs-toggle="tooltip" title="Eliminar">
                                                <i class="fa-solid fa-times fa-2x"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <div *ngIf="lsdir.direcciones && lsdir.direcciones.length > 0" class="fade-in-container" [style.pointer-events]="isLoading ? 'none' : 'auto'">
                <pagina-widget [pagina]="lsdir.pagina" [numPaginas]="lsdir.numPaginas" [rows]="lsdir.rows" (chgEvent)="dirPagina($event)"></pagina-widget>
            </div>
            <hr />
            <div class="row">
                <div *ngIf="model.idEstatus == 1" class="accordion col-xl-6" id="accordionExample">
                </div>
                <div *ngIf="model.idEstatus == 1" class="accordion col-xl-6" id="accordionExample">
                    <!--Pestaña 0-->
                    <div class="accordion-item">
                        <h1 class="accordion-header" id="headingCotizacion">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseLayoutDirectorio" aria-expanded="false" aria-controls="collapseCotizacion">
                                <i class="fa fa-table-list me-2"></i> Layout
                            </button>
                        </h1>
                        <div id="collapseLayoutDirectorio" class="accordion-collapse collapse" aria-labelledby="headingCotizacion">
                            <div class="accordion-body">
                                <div class="col-12 col-sm-12 col-md-12">
                                    <div *ngIf="isLoadinglay" class="row-12 text-center">
                                        <h6 *ngIf="isLoadinglay">Cargando Layout...</h6>
                                    </div>
                                    <div *ngIf="isLoadinglay" class="text-center ">
                                        <i class="fas fa-spinner fa-spin fa-2x"></i>
                                    </div>
                                    <button type="button" class="btn btn-outline-info" (click)="descargarLayoutDirectorio(); quitarFocoDeElementos2()" [disabled]="isLoadinglay">
                                        <i class="fa-solid fa-download fa-xl me-2"></i>
                                        Descargar
                                    </button>
                                    <input type="file" (change)="onFileChangeDir($event)" #fileInputDir style="display:none" accept=".xlsx,.xls" id="loutDir">
                                    <button type="button" class="btn btn-outline-secondary" (click)="fileInputDir.click(); quitarFocoDeElementos2()" [disabled]="isLoadinglay">
                                        <i class="fa-solid fa-upload fa-xl me-2"></i>
                                        Cargar
                                    </button>
                                    <button type="button" class="btn btn-lg btn-outline-dark" (click)="openPueLay(); quitarFocoDeElementos2()" data-bs-toggle="tooltip" title="Información para llenar el layout">
                                        <i class="fa-solid fa-circle-info"></i>
                                    </button>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="model.idServicio != 4" class="tab-pane fade " id="plantilla" role="tabpanel" aria-labelledby="plantilla-tab">
            <div class="row">
                <div class="col-12 col-md-8 text-start">
                    <h5><span class="badge plantilla text-white"> <i class="fa fa-money-bill"></i> Importe mensual: $ {{ model.subTotal + model.indirecto + model.utilidad + model.comisionSV + model.comisionExt + model.totalPolizaCumplimiento | number: '1.2' }}</span> <span class="badge plantilla text-white ms-1"><i class="fa fa-users"></i> No. Empleados: {{lspue.empleados}}</span></h5>
                </div>
                <div class="col-12 col-md-4 text-end">
                    <button class="btn btn-outline-primary btn-sm mb-1" (click)="toggleAllTabs()"><i class="fa-solid {{ allTabsOpen ? 'fa-chevron-up' : 'fa-chevron-down' }}"></i> {{ allTabsOpen ? 'Cerrar todo' : 'Abrir todo' }}</button>
                </div>
            </div>
            <div class="table-container row col-md-12 box-shadow" #tbpuestos>
                <div id="accordion" *ngFor="let dir of lspue.direccionesCotizacion" [ngClass]="{'open': allTabsOpen}" (click)="quitarFocoDeElementos2()" style=" margin-bottom: 1px;">
                    <div class="plantilla row">
                        <a id="aListaOperarios{{ dir.idDireccionCotizacion }}" class="btn text-white col-md-1 col-1 d-flex align-items-center justify-content-center" style="box-shadow:none;" data-bs-toggle="collapse" href="#dvPuestosDireccion{{ dir.idDireccionCotizacion }}">
                            <i class="fa-solid fa-location-dot fa-2x"></i>
                        </a>
                        <a id="aListaOperarios{{ dir.idDireccionCotizacion }}" class="btn text-white text-start col-md-9 col-8" style="box-shadow:none;" data-bs-toggle="collapse" href="#dvPuestosDireccion{{ dir.idDireccionCotizacion }}">
                            <h6 style="margin-bottom:0;">
                                {{ dir.nombreSucursal }}
                            </h6>
                            <span class="badge plantilla text-white">{{ dir.ciudad }}, {{ dir.estado }}</span>
                        </a>
                        <a *ngIf="model.idEstatus == 1" (click)="addPlan(dir.idDireccionCotizacion, dir.nombreSucursal)" class="btn btn-outline-primary col-md-2 col-2 agrega-puesto d-flex align-items-center justify-content-center" style="cursor:pointer;" data-bs-toggle="tooltip" title="Agregar operario">
                            <i class="fa-solid fa-user-plus fa-2x" style="color: white;"></i>
                        </a>
                    </div>
                    <div id="dvPuestosDireccion{{ dir.idDireccionCotizacion }}" class="collapse row" [ngClass]="{'show': allTabsOpen}">
                        <div class="card-body">
                            <div style="overflow-x: hidden;">
                                <table class="table table-borderless table-responsive table-striped" id="tbOperarios">
                                    <tbody>
                                        <tr *ngFor="let pt of filtroPlan(dir.idDireccionCotizacion)" id="tr{{ pt.idPuestoDireccionCotizacion }}">
                                            <td class="col-xl-10 col-sm-9">
                                                <div class="row pb-3 ">
                                                    <div class="col-xl-4 col-8 col-sm-6">
                                                        <span class="badge ">Puesto:</span>
                                                        <div class="ms-1">{{ pt.puesto }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-3 col-sm-2 ">
                                                        <span class="badge ">Cantidad:</span>
                                                        <div class="ms-4">{{ pt.cantidad }}</div>
                                                    </div>
                                                    <div class="col-xl-4 col-8 col-sm-6">
                                                        <span class="badge">Horario:</span>
                                                        <div class="ms-1 small">{{ pt.diaInicio }} a {{ pt.diaFin }} de {{ pt.hrInicio.substring(0, 5) }} a {{ pt.hrFin.substring(0, 5) }}</div>
                                                        <div *ngIf="pt.diaInicioFin == pt.diaFinFin && pt.diaInicioFin !== '0'" class="ms-1 small">{{ pt.diaFinFin }} de {{ pt.hrInicioFin.substring(0, 5) }} a {{ pt.hrFinFin.substring(0, 5) }}</div>
                                                        <div *ngIf="pt.diaInicioFin !== pt.diaFinFin && pt.diaInicioFin !== '0'" class="ms-1 small">{{ pt.diaInicioFin}} a {{ pt.diaFinFin }} de {{ pt.hrInicioFin.substring(0, 5) }} a {{ pt.hrFinFin.substring(0, 5) }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-3 col-sm-3">
                                                        <span class="badge ">Jornada:</span>
                                                        <div class="ms-3">{{ pt.jornadaDesc }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Turno:</span>
                                                        <div class="ms-1">{{ pt.turno }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Salario:</span>
                                                        <div class="ms-1">$ {{ pt.sueldo | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Aguinaldo:</span>
                                                        <div class="ms-1">$ {{ pt.aguinaldo | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Vacaciones:</span>
                                                        <div class="ms-1">$ {{ pt.vacaciones | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Prima Vacacional:</span>
                                                        <div class="ms-1">$ {{ pt.primaVacacional | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">ISN:</span>
                                                        <div class="ms-1">$ {{ pt.isn | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">IMSS:</span>
                                                        <div class="ms-1">$ {{ pt.imss | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Bonos:</span>
                                                        <div class="ms-1">$ {{ pt.bonos | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Vales:</span>
                                                        <div class="ms-1">$ {{ pt.vales | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Festivos:</span>
                                                        <div class="ms-1">$ {{ pt.festivo | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Domingos:</span>
                                                        <div class="ms-1">$ {{ pt.domingo | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-4 col-sm-3">
                                                        <span class="badge ">Cubre descansos:</span>
                                                        <div class="ms-1">$ {{ pt.cubreDescanso | number: '0.2' }}</div>
                                                    </div>
                                                    <div class="col-xl-2 col-6 col-sm-3">
                                                        <span class="badge ">Total:</span>
                                                        <div class="ms-1">$ {{ pt.total | number: '0.2' }}</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="col-xl-2 col-sm-3">
                                                <div class="text-center">
                                                    <a class="btn btn-sm btn-outline-secondary mb-1" (click)="getMatPues(pt.idPuestoDireccionCotizacion, dir.idDireccionCotizacion, 'material', dir.nombreSucursal, pt.puesto)" data-bs-toggle="tooltip" title="Material">
                                                        <i class="fa-solid fa-pump-soap fa-2x"></i>
                                                    </a>
                                                    <a class="btn btn-sm btn-outline-info mb-1" (click)="getMatPues(pt.idPuestoDireccionCotizacion, dir.idDireccionCotizacion, 'uniforme', dir.nombreSucursal, pt.puesto)" data-bs-toggle="tooltip" title="Uniforme">
                                                        <i class="fa-solid fa-shirt fa-2x"></i>
                                                    </a>
                                                    <a class="btn btn-sm btn-outline-success mb-1" (click)="getMatPues(pt.idPuestoDireccionCotizacion, dir.idDireccionCotizacion, 'equipo', dir.nombreSucursal, pt.puesto)" data-bs-toggle="tooltip" title="Equipo">
                                                        <i class="fa-solid fa-helmet-safety fa-2x"></i>
                                                    </a>
                                                    <a class="btn btn-sm btn-outline-danger mb-1" (click)="getMatPues(pt.idPuestoDireccionCotizacion, dir.idDireccionCotizacion, 'herramienta', dir.nombreSucursal, pt.puesto)" data-bs-toggle="tooltip" title="Herramienta">
                                                        <i class="fa-solid fa-hammer fa-2x"></i>
                                                    </a>
                                                    <a *ngIf="model.idEstatus == 1" class="btn btn-sm btn-outline-primary mb-1" (click)="updPlan(pt.idPuestoDireccionCotizacion, dir.nombreSucursal)" data-bs-toggle="tooltip" title="Editar">
                                                        <i class="fa-solid fa-pencil fa-2x"></i>
                                                    </a>
                                                    <a *ngIf="model.idEstatus == 1" class="btn btn-sm btn-outline-danger mb-1" (click)="confirmaEliminarPuestoDireccionCotizacion(pt.idPuestoDireccionCotizacion)" title="Descartar">
                                                        <i class="fa-solid fa-times fa-2x"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <br />
            <div *ngIf="lspue.direccionesCotizacion && lspue.direccionesCotizacion.length > 0" class="fade-in-container" [style.pointer-events]="isLoading ? 'none' : 'auto'">
                <pagina-widget [pagina]="lspue.pagina" [numPaginas]="lspue.numPaginas" [rows]="lspue.rows" (chgEvent)="puePagina($event)"></pagina-widget>
            </div>

            <hr />
            <div class="row">
                <div *ngIf="model.idEstatus == 1" class="accordion col-xl-6" id="accordionExample">
                </div>
                <div *ngIf="model.idEstatus == 1" class="accordion col-xl-6" id="accordionExample">
                    <!--Pestaña 0-->
                    <div class="accordion-item">
                        <h1 class="accordion-header" id="headingCotizacion">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseModificarPlantilla" aria-expanded="false" aria-controls="collapseCotizacion">
                                <i class="fa fa-pencil me-2"></i> Modificar productos de plantillas
                            </button>
                        </h1>
                        <div id="collapseModificarPlantilla" class="accordion-collapse collapse" aria-labelledby="headingCotizacion">
                            <div class="accordion-body">
                                <div class="row text-start">
                                    <div class="col-6 col-sm-6 col-md-6">
                                        <button type="button" class="btn btn-outline-primary text-start" (click)="openProductoMasivo(0); quitarFocoDeElementos2()">
                                            <i class="fa-solid fa-plus fa-1x me-1"></i><i class="fa-solid fa-list fa-xl me-2"></i>
                                            Agregar
                                        </button>
                                    </div>
                                    <div class="col-6 col-sm-6 col-md-6">
                                        <button type="button" class="btn btn-outline-danger text-start" (click)="openProductoMasivo(1); quitarFocoDeElementos2()">
                                            <i class="fa-solid fa-times fa-1x me-1"></i><i class="fa-solid fa-list fa-xl me-2"></i>
                                            Eliminar
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--Pestaña 1-->
                    <div class="accordion-item">
                        <h1 class="accordion-header" id="headingCotizacion">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseLayoutPlantilla" aria-expanded="false" aria-controls="collapseCotizacion">
                                <i class="fa fa-table-list me-2"></i> Layout
                            </button>
                        </h1>
                        <div id="collapseLayoutPlantilla" class="accordion-collapse collapse" aria-labelledby="headingCotizacion">
                            <div class="accordion-body">
                                <div class="row text-start">
                                    <div class="col-5 col-sm-5 col-md-5">
                                        <button type="button" class="btn btn-outline-info" (click)="descargarLayoutPlantilla(); quitarFocoDeElementos2()">
                                            <i class="fa-solid fa-download fa-xl me-2"></i>
                                            Descargar
                                        </button>
                                    </div>
                                    <input type="file" (change)="onFileChangePlan($event)" #fileInputPlan style="display:none" accept=".xlsx,.xls" id="loutPlan">
                                    <div class="col-5 col-sm-5 col-md-5">
                                        <button type="button" class="btn btn-outline-secondary" (click)="fileInputPlan.click(); quitarFocoDeElementos2()">
                                            <i class="fa-solid fa-upload fa-xl me-2"></i>
                                            Cargar
                                        </button>
                                    </div>
                                    <div class="col-2 col-sm-2 col-md-2">

                                        <button type="button" class="btn btn-lg btn-outline-dark" (click)="openPueLay(); quitarFocoDeElementos2()" data-bs-toggle="tooltip" title="Información para llenar el layout">
                                            <i class="fa-solid fa-circle-info"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="material" role="tabpanel" aria-labelledby="plantilla-tab">
            <div>
                <div class="row">
                    <div class="col-md-3 col-12">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" [(ngModel)]="txtMatKey" asp-for="Keywords" (input)="getMat(selTipo)" id="txtProducto">
                            <label for="txtProducto">Producto</label>
                        </div>
                    </div>
                    <div class="col-md-3 col-6">
                        <div class="form-floating mb-3">
                            <select class="form-select" [(ngModel)]="selMatDir" asp-for="IdDireccionCotizacion" aria-label="IdDireccionCotizacion" (change)="getMat(selTipo)" id="ddlSucursal">
                                <option value="0" selected>Seleccione...</option>
                                <option *ngFor="let dm of cotdirs" [ngValue]="dm.id">{{ dm.descripcion }}</option>
                            </select>
                            <label for="ddlSucursal">Sucursal</label>
                        </div>
                    </div>
                    <div *ngIf="model.idEstatus == 1" class="col-md-6 col-6">
                        <button type="button" (click)="getNewMat(selTipo)" class="btn btn-outline-primary float-end mb-3" id="btnAgregarDireccion"><i class="fa-solid fa-plus"></i> Agregar {{ selTipo }}</button>
                    </div>
                </div>
            </div>
            <!--<div *ngIf="isLoading || (lsmat.materialesCotizacion && lsmat.materialesCotizacion.length === 0)" class="row-12 text-center">
                <hr />
                <br />
                <br />
                <h6 *ngIf="isLoading">Cargando...</h6>
                <h6 *ngIf="!isLoading && lsmat.materialesCotizacion && lsmat.materialesCotizacion.length === 0">No se encontraron registros</h6>
            </div>
            <div *ngIf="isLoading" class="text-center ">
                <i class="fas fa-spinner fa-spin fa-3x"></i>
            </div>-->
            <div *ngIf="lsmat.materialesCotizacion && lsmat.materialesCotizacion.length == 0 && isLoading == false" class="text-center">
                <hr />
                <br />
                <h6>No se encontraron registros</h6>
            </div>
            <div *ngIf="lsmat.materialesCotizacion && lsmat.materialesCotizacion.length > 0" class="table-container box-shadow fade-in-container">
                <table class="table table-striped table-responsive">
                    <thead class="sticky-top">
                        <tr class="d-md-none">
                            <th class="ps-2">Lista de productos</th>
                            <th></th>
                        </tr>
                        <tr class="d-none d-md-table-row">
                            <th>
                                <div class="row">
                                    <div class="col-md-2 col-sm-6 col-1">
                                        <span class="ms-2">Clave</span>
                                    </div>
                                    <div [ngClass]="model.idServicio != 4 && model.idServicio != 5? 'col-md-3 col-sm-6 col-3':'col-md-4 col-sm-8 col-9'">
                                        <span class="ms-2">Producto</span>
                                    </div>
                                    <div class="col-md-1 col-sm-6 col-3">
                                        <span class="ms-2">Precio</span>
                                    </div>
                                    <div class="col-md-1 col-sm-6 col-2 text-center">
                                        <span class="ms-2">Cant.</span>
                                    </div>
                                    <div *ngIf="model.idServicio != 4 && model.idServicio != 5" class="col-md-2 col-sm-6 col-2 align-middle">
                                        <span class="ms-2">Frecuencia</span>
                                    </div>
                                    <div [ngClass]="model.idServicio != 4? 'col-md-1 col-sm-4 col-3':'col-md-2 col-sm-4 col-4'">
                                        <span class="ms-2">Total</span>
                                    </div>
                                    <div class="col-md-2 col-sm-6 col-6">
                                        <span class="ms-2">Fecha Alta</span>
                                    </div>
                                </div>
                            </th>
                            <th *ngIf="model.idEstatus == 1"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let mat of lsmat.materialesCotizacion">
                            <td class="align-middle">
                                <div class="row d-flex align-items-center">
                                    <div class="col-md-2 col-sm-4 col-4">
                                        <span class="badge d-md-none">Clave:</span>
                                        <div>{{ mat.claveProducto }}</div>
                                    </div>
                                    <div [ngClass]="model.idServicio != 4 && model.idServicio != 5? 'col-md-3 col-sm-6 col-8':'col-md-4 col-sm-8 col-9'">
                                        <span class="badge d-md-none">Producto:</span>
                                        <div class="ms-2">{{ mat.descripcionMaterial }}</div>
                                        <small class="ms-2 text-muted">{{ mat.nombreSucursal }}</small>
                                    </div>
                                    <div class="col-md-1 col-sm-4 col-4">
                                        <span class="badge d-md-none">Precio:</span>
                                        <div class="ms-2">${{ mat.precioUnitario | number: '0.2' }}</div>
                                    </div>
                                    <div class="col-md-1 col-sm-4 col-4  text-center">
                                        <span class="badge d-md-none">Cantidad:</span>
                                        <div class="ms-2">{{ mat.cantidad | number: '0.0' }}</div>
                                    </div>
                                    <div *ngIf="model.idServicio != 4 && model.idServicio != 5" class="col-md-2 col-sm-6 col-4">
                                        <span class="badge d-md-none">Frecuencia:</span>
                                        <div class="ms-2">{{ mat.idFrecuencia }}</div>
                                    </div>
                                    <div [ngClass]="model.idServicio != 4? 'col-md-1 col-sm-4 col-4':'col-md-2 col-sm-4 col-4'">
                                        <span class="badge d-md-none">Total:</span>
                                        <div class="ms-2">${{ mat.total | number: '0.2' }}</div>
                                    </div>
                                    <div class="col-md-2 col-sm-4 col-4">
                                        <span class="badge d-md-none">Fecha Alta:</span>
                                        <div class="ms-2">{{ mat.fechaAlta | date: 'dd/MM/yyyy' }}</div>
                                    </div>
                                </div>
                            </td>
                            <td *ngIf="model.idEstatus == 1" class="text-center">
                                <a class="btn btn-sm btn-outline-primary mb-1" (click)="selNewMat(mat.idMaterialCotizacion, selTipo, mat.edit = 1)" data-bs-toggle="tooltip" title="Editar">
                                    <i class="fa-solid fa-pencil fa-2x"></i>
                                </a>
                                <a class="btn btn-sm btn-outline-danger mb-1" (click)="removeMat(mat.idMaterialCotizacion)" data-bs-toggle="tooltip" title="Eliminar">
                                    <i class="fa-solid fa-times fa-2x"></i>
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <br />
            <div *ngIf="lsmat.materialesCotizacion && lsmat.materialesCotizacion.length > 0">
                <pagina-widget [pagina]="lsmat.pagina" [numPaginas]="lsmat.numPaginas" [rows]="lsmat.rows" (chgEvent)="matPagina($event)"></pagina-widget>
            </div>
            <br />
            <hr />
            <div class="row">
                <div *ngIf="model.idEstatus == 1" class="accordion col-xl-6" id="accordionExample">
                </div>
                <div *ngIf="model.idEstatus == 1" class="accordion col-xl-6" id="accordionExample">
                    <!--Pestaña 0-->
                    <div class="accordion-item">
                        <h1 class="accordion-header" id="headingCotizacion">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseLayoutProducto" aria-expanded="false" aria-controls="collapseCotizacion">
                                <i class="fa fa-table-list me-2"></i> Layout
                            </button>
                        </h1>
                        <div id="collapseLayoutProducto" class="accordion-collapse collapse" aria-labelledby="headingCotizacion">
                            <div class="accordion-body">
                                <div class="col-12 col-sm-12 col-md-12">
                                    <div *ngIf="isLoadinglay" class="row-12 text-center">
                                        <i class="fas fa-spinner fa-spin fa-3x"></i>
                                        <h6 *ngIf="isLoadinglay">Subiendo Layout...</h6>
                                    </div>
                                    <button type="button" class="btn btn-outline-info" (click)="descargarLayoutProductoExtra(); quitarFocoDeElementos2()">
                                        <i class="fa-solid fa-download fa-xl me-2"></i>
                                        Layout para {{ selTipo}}
                                    </button>
                                    <input type="file" (change)="onFileChangeProductoExtra($event)" #fileInputProductoExtra style="display:none" accept=".xlsx,.xls" id="loutProductoExtra">
                                    <button type="button" class="btn btn-outline-secondary" (click)="fileInputProductoExtra.click(); quitarFocoDeElementos2()">
                                        <i class="fa-solid fa-upload fa-xl me-2"></i>
                                        Cargar
                                    </button>
                                    <button type="button" class="btn btn-lg btn-outline-dark" (click)="openPueLay(); quitarFocoDeElementos2()" data-bs-toggle="tooltip" title="Información para llenar el layout">
                                        <i class="fa-solid fa-circle-info"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div *ngIf="model.idServicio != 4" class="tab-pane fade" id="servicio" role="tabpanel" aria-labelledby="plantilla-tab">
            <div *ngIf="model.idEstatus == 1">
                <div class="row">
                    <div class="col-md-12">
                        <button type="button" (click)="servicio(0)" class="btn btn-outline-primary float-end" id="btnAgregarDireccion"><i class="fa-solid fa-plus"></i> Agregar servicio</button>
                    </div>
                </div>
                <!--  -->
            </div>
            <div *ngIf="isLoading || (lsser.serviciosCotizacion && lsser.serviciosCotizacion.length === 0)" class="row-12 text-center">
                <hr />
                <br />
                <br />
                <h6 *ngIf="isLoading">Cargando...</h6>
                <h6 *ngIf="!isLoading && lsser.serviciosCotizacion && lsser.serviciosCotizacion.length === 0">No se encontraron registros</h6>
            </div>
            <div *ngIf="isLoading" class="text-center ">
                <i class="fas fa-spinner fa-spin fa-3x"></i>
            </div>

            <ng-container *ngIf="isGen == 1">
                <h6>General</h6>
                <div class="table-container">
                    <table class="table table-borderless table-striped table-responsive">
                        <thead class="sticky-top">
                            <tr class="d-md-none">
                                <th class="ps-2 text-start">Servicios</th>
                                <th *ngIf="model.idEstatus == 1"></th>
                            </tr>
                            <tr class="d-none d-md-table-row">
                                <th>
                                    <div class="row d-flex align-items-center">
                                        <div class="col-md-3 col-sm-6 col-1">
                                            <span class="ms-2">Servicio</span>
                                        </div>
                                        <div class="col-md-2 col-sm-6 col-5">
                                            <span class="ms-2">Costo</span>
                                        </div>
                                        <div class="col-md-1 col-sm-6 col-3">
                                            <span class="ms-2">Cant.</span>
                                        </div>
                                        <div class="col-md-2 col-sm-6 col-2">
                                            <span class="ms-2">Frecuencia</span>
                                        </div>
                                        <div class="col-md-2 col-sm-6 col-2">
                                            <span class="ms-2">Total</span>
                                        </div>
                                        <div class="col-md-2 col-sm-6 col-6">
                                            <span class="ms-2">Fecha Alta</span>
                                        </div>
                                    </div>
                                </th>
                                <th *ngIf="model.idEstatus == 1"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let ser of lsser.serviciosCotizacion">
                                <tr *ngIf="ser.idDireccionCotizacion == 0">
                                    <td>
                                        <div class="row d-flex align-items-center">
                                            <div class="col-md-3 col-sm-6 col-6">
                                                <span class="badge d-md-none">Servicio:</span>
                                                <div class="ms-2">{{ ser.servicioExtra }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4">
                                                <span class="badge d-md-none">Costo:</span>
                                                <div class="ms-2">${{ ser.precioUnitario | number: '0.2' }}</div>
                                            </div>
                                            <div class="col-md-1 col-sm-4 col-2">
                                                <span class="badge d-md-none">Cantidad:</span>
                                                <div class="ms-2">{{ ser.cantidad | number: '0.0' }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4">
                                                <span class="badge d-md-none">Frecuencia:</span>
                                                <div class="ms-2">{{ ser.idFrecuencia }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4 ">
                                                <span class="badge d-md-none">Total:</span>
                                                <div class="ms-2">${{ ser.cantidad * ser.precioUnitario | number: '0.2' }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4">
                                                <span class="badge d-md-none">Fecha Alta:</span>
                                                <div class="ms-2">{{ ser.fechaAlta | date: 'dd/MM/yyyy' }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td *ngIf="model.idEstatus == 1" class="text-center">
                                        <a class="btn btn-sm btn-outline-primary" (click)="servicio(ser.idServicioExtraCotizacion)" data-bs-toggle="tooltip" title="Editar">
                                            <i class="fa-solid fa-pencil fa-2x"></i>
                                        </a>
                                        <a class="btn btn-sm btn-outline-danger" (click)="eliSer(ser.idServicioExtraCotizacion)" data-bs-toggle="tooltip" title="Eliminar">
                                            <i class="fa-solid fa-times fa-2x"></i>
                                        </a>
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
            </ng-container>
            <br />

            <ng-container *ngIf="isSuc == 1">
                <h6>Por directorio</h6>
                <div class="table-container">
                    <table class="table table-borderless table-striped table-responsive">
                        <thead class="sticky-top">
                            <tr class="d-md-none">
                                <th class="ps-2 text-start">Servicios</th>
                                <th *ngIf="model.idEstatus == 1"></th>
                            </tr>
                            <tr class="d-none d-md-table-row">
                                <th>
                                    <div class="row d-flex align-items-center">
                                        <div class="col-md-3 col-sm-6 col-1">
                                            <span class="ms-2">Servicio</span>
                                        </div>
                                        <div class="col-md-2 col-sm-6 col-5">
                                            <span class="ms-2">Costo</span>
                                        </div>
                                        <div class="col-md-1 col-sm-6 col-3">
                                            <span class="ms-2">Cant.</span>
                                        </div>
                                        <div class="col-md-2 col-sm-6 col-2">
                                            <span class="ms-2">Frecuencia</span>
                                        </div>
                                        <div class="col-md-2 col-sm-6 col-2">
                                            <span class="ms-2">Total</span>
                                        </div>
                                        <div class="col-md-2 col-sm-6 col-6">
                                            <span class="ms-2">Fecha Alta</span>
                                        </div>
                                    </div>
                                </th>
                                <th *ngIf="model.idEstatus == 1"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let ser of lsser.serviciosCotizacion">
                                <tr *ngIf="ser.idDireccionCotizacion != 0">
                                    <td>
                                        <div class="row d-flex align-items-center">
                                            <div class="col-md-3 col-sm-6 col-6">
                                                <span class="badge d-md-none">Servicio:</span>
                                                <div class="ms-2">{{ ser.servicioExtra }}</div>
                                                <small class="ms-2 text-muted">{{ ser.direccion }}</small>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4">
                                                <span class="badge d-md-none">Costo:</span>
                                                <div class="ms-2">${{ ser.precioUnitario | number: '0.2' }}</div>
                                            </div>
                                            <div class="col-md-1 col-sm-4 col-2">
                                                <span class="badge d-md-none">Cantidad:</span>
                                                <div class="ms-2">{{ ser.cantidad | number: '0.0' }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4">
                                                <span class="badge d-md-none">Frecuencia:</span>
                                                <div class="ms-2">{{ ser.idFrecuencia }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4">
                                                <span class="badge d-md-none">Total:</span>
                                                <div class="ms-2">${{ ser.cantidad * ser.precioUnitario | number: '0.2' }}</div>
                                            </div>
                                            <div class="col-md-2 col-sm-4 col-4">
                                                <span class="badge d-md-none">Fecha Alta:</span>
                                                <div class="ms-2">{{ ser.fechaAlta | date: 'dd/MM/yyyy' }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td *ngIf="model.idEstatus == 1" class="text-center">
                                        <a class="btn btn-sm btn-outline-primary mb-1" (click)="servicio(ser.idServicioExtraCotizacion)" data-bs-toggle="tooltip" title="Editar">
                                            <i class="fa-solid fa-pencil fa-2x"></i>
                                        </a>
                                        <a class="btn btn-sm btn-outline-danger mb-1" (click)="eliSer(ser.idServicioExtraCotizacion)" data-bs-toggle="tooltip" title="Eliminar">
                                            <i class="fa-solid fa-times fa-2x"></i>
                                        </a>
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
            </ng-container>
            <!--<pagina-widget [pagina]="lsser.pagina" [numPaginas]="lsser.numPaginas" [rows]="lsser?.serviciosCotizacion?.rows" (chgEvent)="matPagina($event)"></pagina-widget>-->
        </div>
    </div>
</div>
<pues-widget (smEvent)="savePlan($event)"></pues-widget>
<direc-widget (smEvent)="saveDir($event)"></direc-widget>
<pueslayout-widget (smEvent)="savePlan($event)"></pueslayout-widget>
<mate-widget (smEvent)="newMate($event)"></mate-widget>
<mateadd-widget (smEvent)="saveMate($event)" (returnModal)="return($event)"></mateadd-widget>
<servadd-widget (smEvent)="getServ()"></servadd-widget>
<marcaventa-widget (smEvent)="returnMarcaCotizacion($event)"></marcaventa-widget>
<toast-widget></toast-widget>
<contrato-widget (contratoEvent)="openFormularioCliente($event)"></contrato-widget>
<cliente-widget (clienteEvent)="openCargaContratoWidget($event);"></cliente-widget>
<carga-widget></carga-widget>
<confirmacion-widget (confirmaEvent)="confirmacionEvent($event)"></confirmacion-widget>
<subircontratocliente-widget (subirContratoEvent)="subirContratoEvent($event)"></subircontratocliente-widget>
<productogeneral-widget (prodgEvent)="returnProductoGeneral($event)"></productogeneral-widget>

